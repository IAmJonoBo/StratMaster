<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StratMaster Enhanced Dashboard - Frontier-Grade UX</title>
    <style>
        /* CSS Custom Properties for WCAG AA Compliance */
        :root {
            --primary-text: #111827;
            --secondary-text: #6b7280;
            --primary-bg: #ffffff;
            --secondary-bg: #f9fafb;
            --accent-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --border-color: #e5e7eb;
            
            /* High contrast colors for accessibility */
            --focus-ring: #2563eb;
            --focus-bg: #dbeafe;
            
            /* Spacing system */
            --spacing-1: 0.25rem;
            --spacing-2: 0.5rem;
            --spacing-3: 0.75rem;
            --spacing-4: 1rem;
            --spacing-6: 1.5rem;
            --spacing-8: 2rem;
        }

        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: var(--secondary-bg);
            color: var(--primary-text);
            line-height: 1.6;
        }

        /* Skip links for screen readers */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--primary-text);
            color: var(--primary-bg);
            padding: var(--spacing-2) var(--spacing-3);
            text-decoration: none;
            border-radius: 4px;
            z-index: 1000;
        }
        
        .skip-link:focus {
            top: 6px;
        }

        /* Focus management and keyboard navigation */
        *:focus {
            outline: 2px solid var(--focus-ring);
            outline-offset: 2px;
            border-radius: 4px;
        }

        .btn-focus:focus {
            background-color: var(--focus-bg);
            box-shadow: 0 0 0 2px var(--focus-ring);
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            :root {
                --primary-text: #000000;
                --secondary-text: #000000; 
                --primary-bg: #ffffff;
                --border-color: #000000;
            }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .container { 
            max-width: 1280px; 
            margin: 0 auto; 
            padding: var(--spacing-8); 
        }

        .header { 
            margin-bottom: var(--spacing-8); 
        }

        .header h1 { 
            font-size: 2rem; 
            font-weight: bold; 
            color: var(--primary-text); 
            margin-bottom: var(--spacing-2); 
        }

        .header p { 
            color: var(--secondary-text); 
            font-size: 1.125rem;
        }

        /* Enhanced button styles with accessibility */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-2) var(--spacing-4);
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: 6px;
            border: 1px solid transparent;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            text-decoration: none;
            min-height: 44px; /* WCAG AA minimum touch target */
            min-width: 44px;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
        }

        .btn:active:not(:disabled) {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        .btn-secondary {
            background: var(--primary-bg);
            color: var(--primary-text);
            border-color: var(--border-color);
        }

        /* Enhanced card components */
        .panel-card { 
            background: var(--primary-bg); 
            border: 1px solid var(--border-color); 
            border-radius: 8px; 
            padding: var(--spacing-6); 
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.2s ease-in-out;
        }

        .panel-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .panel-header h2 { 
            font-size: 1.125rem; 
            font-weight: 600; 
            color: var(--primary-text); 
            margin-bottom: var(--spacing-2);
        }

        .panel-header p { 
            font-size: 0.875rem; 
            color: var(--secondary-text); 
        }

        /* Improved layout systems */
        .analysis-layout { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); 
            gap: var(--spacing-6); 
            margin-top: var(--spacing-8);
        }

        .config-section { 
            margin-bottom: var(--spacing-8); 
        }

        .config-section h2 { 
            font-size: 1.25rem; 
            font-weight: 600; 
            margin-bottom: var(--spacing-4); 
        }

        /* Enhanced form controls */
        .form-group {
            margin-bottom: var(--spacing-4);
        }

        .form-label {
            display: block;
            font-weight: 500;
            margin-bottom: var(--spacing-1);
            color: var(--primary-text);
        }

        .form-control {
            display: block;
            width: 100%;
            padding: var(--spacing-2) var(--spacing-3);
            font-size: 0.875rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: var(--primary-bg);
            color: var(--primary-text);
            min-height: 44px;
        }

        .form-control:focus {
            border-color: var(--focus-ring);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
        }

        /* Status indicators with better accessibility */
        .status-indicator { 
            display: flex; 
            align-items: center; 
            gap: var(--spacing-2); 
            padding: var(--spacing-2);
        }

        .status-dot { 
            width: 12px; 
            height: 12px; 
            border-radius: 50%; 
            flex-shrink: 0;
        }

        .status-active { 
            background: var(--success-color); 
            animation: pulse 2s infinite; 
        }

        .status-enabled { 
            background: var(--accent-color); 
            animation: pulse 2s infinite; 
        }

        .status-ready { 
            background: #8b5cf6; 
            animation: pulse 2s infinite; 
        }

        @keyframes pulse { 
            0%, 100% { opacity: 1; } 
            50% { opacity: 0.7; } 
        }

        /* Enhanced telemetry display */
        .telemetry-metrics { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); 
            gap: var(--spacing-4); 
            margin-top: var(--spacing-4);
        }

        .metric-card { 
            padding: var(--spacing-3); 
            border-radius: 6px; 
            text-align: center; 
            border: 1px solid var(--border-color);
        }

        .metric-value { 
            font-size: 1.5rem; 
            font-weight: 700; 
            display: block;
        }

        .metric-label { 
            font-size: 0.75rem; 
            margin-top: var(--spacing-1); 
            color: var(--secondary-text);
        }

        /* Color-coded metrics with accessibility */
        .metric-success { background: rgba(16, 185, 129, 0.1); color: #065f46; }
        .metric-warning { background: rgba(245, 158, 11, 0.1); color: #92400e; }
        .metric-info { background: rgba(59, 130, 246, 0.1); color: #1e40af; }
        .metric-purple { background: rgba(139, 92, 246, 0.1); color: #5b21b6; }

        /* Enhanced debate visualization */
        .debate-turn { 
            background: var(--secondary-bg); 
            border: 1px solid var(--border-color); 
            border-radius: 8px; 
            padding: var(--spacing-4); 
            margin-bottom: var(--spacing-4); 
        }

        .agent-info { 
            display: flex; 
            align-items: center; 
            gap: var(--spacing-2); 
            margin-bottom: var(--spacing-2); 
        }

        .agent-icon { 
            width: 32px; 
            height: 32px; 
            background: var(--primary-bg); 
            border: 2px solid var(--border-color);
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: 600;
        }

        .agent-name { 
            font-weight: 600; 
        }

        /* System status footer */
        .system-status { 
            background: var(--secondary-bg); 
            border-radius: 8px; 
            padding: var(--spacing-4); 
            margin-top: var(--spacing-8); 
            border: 1px solid var(--border-color);
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-4);
        }

        /* Responsive design improvements */
        @media (max-width: 768px) {
            .container {
                padding: var(--spacing-4);
            }
            
            .analysis-layout {
                grid-template-columns: 1fr;
            }
            
            .telemetry-metrics {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            :root {
                --primary-text: #f9fafb;
                --secondary-text: #9ca3af;
                --primary-bg: #111827;
                --secondary-bg: #1f2937;
                --border-color: #374151;
                --focus-bg: #1e3a8a;
            }
        }

        /* Loading states and micro-interactions */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Enhanced interactive elements */
        .interactive:hover {
            background-color: rgba(59, 130, 246, 0.05);
            border-color: var(--accent-color);
        }

        /* Progress indicators */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
            margin: var(--spacing-2) 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-color);
            border-radius: 4px;
            transition: width 0.3s ease-in-out;
        }
    </style>
</head>
<body>
    <!-- Skip links for screen readers -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#navigation" class="skip-link">Skip to navigation</a>

    <div class="container">
        <header class="header">
            <h1>StratMaster Enhanced Dashboard</h1>
            <p>Frontier-grade AI-powered Brand Strategy Platform with WCAG 2.1 AA compliance</p>
        </header>

        <main id="main-content">
            <!-- Constitutional Configuration Section -->
            <section class="config-section" aria-labelledby="config-heading">
                <h2 id="config-heading">Constitutional AI Configuration</h2>
                <div class="panel-card">
                    <div class="panel-header">
                        <h3>Enhanced Rule-Based Decision Making</h3>
                        <p>Configure AI behavior with constitutional principles and safety constraints</p>
                    </div>

                    <div class="form-group">
                        <label for="strictness-level" class="form-label">Strictness Level</label>
                        <select id="strictness-level" class="form-control" aria-describedby="strictness-help">
                            <option value="strict">Strict - Zero tolerance for violations</option>
                            <option value="moderate" selected>Moderate - Balanced approach</option>
                            <option value="lenient">Lenient - Flexible interpretation</option>
                        </select>
                        <small id="strictness-help" class="text-secondary">
                            Determines how strictly constitutional principles are enforced
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="custom-principles" class="form-label">Custom Principles</label>
                        <textarea id="custom-principles" class="form-control" rows="3" 
                                  placeholder="Define custom constitutional principles..."
                                  aria-describedby="principles-help"></textarea>
                        <small id="principles-help" class="text-secondary">
                            Add organization-specific rules and constraints
                        </small>
                    </div>

                    <button type="button" class="btn btn-primary" aria-label="Apply constitutional configuration">
                        Apply Configuration
                    </button>
                </div>
            </section>

            <!-- Analysis Dashboard -->
            <section aria-labelledby="analysis-heading">
                <h2 id="analysis-heading" class="sr-only">Analysis Dashboard</h2>
                <div class="analysis-layout">
                    
                    <!-- Debate Visualization -->
                    <div class="panel-card">
                        <div class="panel-header">
                            <h3>Multi-Agent Debate Visualization</h3>
                            <p>Real-time constitutional AI decision process</p>
                        </div>
                        <div class="panel-content">
                            <div class="debate-turn fade-in">
                                <div class="agent-info">
                                    <div class="agent-icon" aria-label="Researcher agent">R</div>
                                    <span class="agent-name">Researcher</span>
                                    <span class="badge badge-active" aria-label="Currently active">Active</span>
                                </div>
                                <p>Market analysis indicates strong demand for sustainable products in Q4 2024...</p>
                                <div class="progress-bar" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                                    <div class="progress-fill" style="width: 75%"></div>
                                </div>
                            </div>

                            <div class="debate-turn fade-in">
                                <div class="agent-info">
                                    <div class="agent-icon" aria-label="Constitutional critic agent">C</div>
                                    <span class="agent-name">Constitutional Critic</span>
                                </div>
                                <p>Evaluating sourcing compliance... ✅ Two sources verified</p>
                                <div class="progress-bar" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100">
                                    <div class="progress-fill" style="width: 90%"></div>
                                </div>
                            </div>

                            <div class="debate-turn fade-in">
                                <div class="agent-info">
                                    <div class="agent-icon" aria-label="Strategist agent">S</div>
                                    <span class="agent-name">Strategist</span>
                                </div>
                                <p>Synthesizing recommendations with 87% confidence...</p>
                                <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100">
                                    <div class="progress-fill" style="width: 60%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Risk Assessment -->
                    <div class="panel-card">
                        <div class="panel-header">
                            <h3>Intelligent Risk Assessment</h3>
                            <p>AI-powered risk analysis with constitutional safeguards</p>
                        </div>
                        <div class="panel-content">
                            <div class="risk-metrics">
                                <div class="metric-card metric-success">
                                    <span class="metric-value" role="text">0.87</span>
                                    <span class="metric-label">Confidence Score</span>
                                </div>
                                <div class="metric-card metric-warning">
                                    <span class="metric-value" role="text">2</span>
                                    <span class="metric-label">Risk Factors</span>
                                </div>
                                <div class="metric-card metric-info">
                                    <span class="metric-value" role="text">94%</span>
                                    <span class="metric-label">Compliance</span>
                                </div>
                                <div class="metric-card metric-purple">
                                    <span class="metric-value" role="text">A+</span>
                                    <span class="metric-label">Safety Grade</span>
                                </div>
                            </div>

                            <div style="margin-top: 1rem;">
                                <h4>Key Risk Indicators</h4>
                                <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                                    <li>✅ Source verification complete</li>
                                    <li>⚠️ Market volatility detected</li>
                                    <li>✅ Constitutional compliance verified</li>
                                    <li>✅ Bias detection passed</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Advanced Telemetry -->
                    <div class="panel-card">
                        <div class="panel-header">
                            <h3>DSPy Telemetry Dashboard</h3>
                            <p>Real-time program execution and performance metrics</p>
                        </div>
                        <div class="panel-content">
                            <div class="telemetry-metrics">
                                <div class="metric-card metric-info">
                                    <span class="metric-value" role="text">3</span>
                                    <span class="metric-label">Active Programs</span>
                                </div>
                                <div class="metric-card metric-success">
                                    <span class="metric-value" role="text">96%</span>
                                    <span class="metric-label">Success Rate</span>
                                </div>
                                <div class="metric-card metric-purple">
                                    <span class="metric-value" role="text">1,247</span>
                                    <span class="metric-label">Total Events</span>
                                </div>
                                <div class="metric-card metric-warning">
                                    <span class="metric-value" role="text">1.8s</span>
                                    <span class="metric-label">Avg Compile</span>
                                </div>
                            </div>

                            <div style="margin-top: 1rem; text-align: center;">
                                <button type="button" class="btn btn-secondary" 
                                        aria-label="View detailed telemetry dashboard">
                                    View Full Dashboard
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Enhanced System Status -->
        <footer class="system-status" role="contentinfo" aria-labelledby="status-heading">
            <h2 id="status-heading">System Status</h2>
            <div class="status-grid">
                <div class="status-indicator">
                    <div class="status-dot status-active" aria-label="Active status"></div>
                    <span>Constitutional System: Active</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot status-enabled" aria-label="Enabled status"></div>
                    <span>DSPy Telemetry: Enabled</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot status-ready" aria-label="Ready status"></div>
                    <span>Chain-of-Verification: Ready</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot status-active" aria-label="Operational status"></div>
                    <span>Asset Management: Operational</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot status-enabled" aria-label="Monitoring status"></div>
                    <span>Security Monitoring: Active</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot status-ready" aria-label="Available status"></div>
                    <span>Dependency Updates: Available</span>
                </div>
            </div>
            
            <div style="margin-top: 1rem; font-size: 0.875rem; color: var(--secondary-text);">
                <p>Last updated: <time datetime="2025-09-23T20:00:00Z">September 23, 2025 at 8:00 PM UTC</time></p>
                <p>WCAG 2.1 AA Compliant • Keyboard Accessible • Screen Reader Compatible</p>
            </div>
        </footer>
    </div>

    <script>
        // Enhanced keyboard navigation and accessibility features
        document.addEventListener('DOMContentLoaded', function() {
            // Add keyboard event listeners for custom interactive elements
            const interactiveElements = document.querySelectorAll('[role="button"], .interactive');
            
            interactiveElements.forEach(element => {
                element.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        element.click();
                    }
                });
            });

            // Focus management for modal dialogs
            function trapFocus(element) {
                const focusableElements = element.querySelectorAll(
                    'a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])'
                );
                
                if (focusableElements.length === 0) return;
                
                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];

                element.addEventListener('keydown', function(e) {
                    if (e.key === 'Tab') {
                        if (e.shiftKey) {
                            if (document.activeElement === firstElement) {
                                lastElement.focus();
                                e.preventDefault();
                            }
                        } else {
                            if (document.activeElement === lastElement) {
                                firstElement.focus();
                                e.preventDefault();
                            }
                        }
                    }
                });
            }

            // Announce dynamic content changes to screen readers
            function announceToScreenReader(message) {
                const announcement = document.createElement('div');
                announcement.setAttribute('aria-live', 'polite');
                announcement.setAttribute('aria-atomic', 'true');
                announcement.style.position = 'absolute';
                announcement.style.left = '-10000px';
                announcement.style.width = '1px';
                announcement.style.height = '1px';
                announcement.style.overflow = 'hidden';
                
                announcement.textContent = message;
                document.body.appendChild(announcement);
                
                setTimeout(() => {
                    document.body.removeChild(announcement);
                }, 1000);
            }

            // Enhanced form validation with accessibility
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.addEventListener('submit', function(e) {
                    const requiredFields = form.querySelectorAll('[required]');
                    let firstInvalidField = null;
                    
                    requiredFields.forEach(field => {
                        if (!field.value.trim()) {
                            field.setAttribute('aria-invalid', 'true');
                            if (!firstInvalidField) {
                                firstInvalidField = field;
                            }
                        } else {
                            field.setAttribute('aria-invalid', 'false');
                        }
                    });
                    
                    if (firstInvalidField) {
                        e.preventDefault();
                        firstInvalidField.focus();
                        announceToScreenReader('Please fill in all required fields');
                    }
                });
            });

            // Simulate real-time updates for demonstration
            setInterval(() => {
                const timestamp = document.querySelector('time');
                if (timestamp) {
                    const now = new Date();
                    timestamp.textContent = now.toLocaleString();
                    timestamp.setAttribute('datetime', now.toISOString());
                }
                
                // Update progress bars with random values for demo
                const progressBars = document.querySelectorAll('.progress-fill');
                progressBars.forEach(bar => {
                    const randomWidth = Math.floor(Math.random() * 40) + 60; // 60-100%
                    bar.style.width = randomWidth + '%';
                    bar.parentElement.setAttribute('aria-valuenow', randomWidth);
                });
            }, 5000);

            // Initialize enhanced interactions
            announceToScreenReader('StratMaster Enhanced Dashboard loaded successfully');
        });
    </script>
</body>
</html>